{% extends "base.html" %}
{% block title %}Characters{% endblock %}

{% block content %}
<h1>Characters</h1>

{% if characters %}
<table class="char-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Class</th>
            <th>Race</th>
            {% if request.endpoint == 'main.public_characters' %}
                <th>Owner</th>
            {% elif request.endpoint == 'main.my_characters' %}
                <th>Visibility</th>
            {% endif %}
            <th>View</th>
        </tr>
    </thead>

    <tbody>
        {% for character in characters %}
        <tr>
            <td>{{ character.name }}</td>
            <td>{{ character.character_class }}</td>
            <td>{{ character.race }}</td>

            {% if request.endpoint == 'main.public_characters' %}
                <td>{{ character.owner.username }}</td>
            {% elif request.endpoint == 'main.my_characters' %}
                <td>{% if character.is_public %}Public{% else %}Private{% endif %}</td>
            {% endif %}

            <td>
                <a class="btn" href="{{ url_for('main.character_detail', char_id=character.id) }}">
                    View
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% else %}
<p>No characters found.</p>
{% endif %}

<br>

<a href="{{ url_for('main.dashboard') }}" class="btn">Back to Dashboard</a>

{% endblock %}
